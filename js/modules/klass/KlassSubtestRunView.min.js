var KlassSubtestRunView,_ref,__bind=function(a,b){return function(){return a.apply(b,arguments);};},__hasProp={}.hasOwnProperty,__extends=function(d,b){for(var a in b){if(__hasProp.call(b,a)){d[a]=b[a];
}}function c(){this.constructor=d;}c.prototype=b.prototype;d.prototype=new c();d.__super__=b.prototype;return d;};KlassSubtestRunView=(function(b){__extends(a,b);
function a(){this.onPrototypeRendered=__bind(this.onPrototypeRendered,this);_ref=a.__super__.constructor.apply(this,arguments);return _ref;}a.prototype.events={"click .done":"done","click .cancel":"cancel","click .subtest_help":"toggleHelp"};
a.prototype.toggleHelp=function(){return this.$el.find(".enumerator_help").fadeToggle(250);};a.prototype.initialize=function(c){this.protoViews=Tangerine.config.prototypeViews;
this.prototypeRendered=false;return this.result=new KlassResult({resultBucket:c.subtest.get("resultBucket"),reportType:c.subtest.get("reportType"),studentId:c.student.id,subtestId:c.subtest.id,part:c.subtest.get("part"),klassId:c.student.get("klassId")});
};a.prototype.render=function(){var c,d;c=(this.options.subtest.get("enumeratorHelp")||"")!==""?"<button class='subtest_help command'>help</button><div class='enumerator_help'>"+(this.options.subtest.get("enumeratorHelp"))+"</div>":"";
d=(this.options.subtest.get("studentDialog")||"")!==""?"<div class='student_dialog'>"+(this.options.subtest.get("studentDialog"))+"</div>":"";this.$el.html("      <h2>"+(this.options.subtest.get("name"))+"</h2>      "+c+"      "+d+"    ");
this.prototypeView=new window[this.protoViews[this.options.subtest.get("prototype")]["run"]]({model:this.options.subtest,parent:this});this.prototypeView.on("rendered",this.onPrototypeRendered);
this.prototypeView.render();this.$el.append(this.prototypeView.el);this.prototypeRendered=true;this.$el.append("<button class='done navigation'>Done</button> <button class='cancel navigation'>Cancel</button>");
return this.trigger("rendered");};a.prototype.onPrototypeRendered=function(){return this.trigger("rendered");};a.prototype.onClose=function(){var c;return(c=this.prototypeView)!=null?typeof c.close==="function"?c.close():void 0:void 0;
};a.prototype.isValid=function(){if(!this.prototypeRendered){return false;}if(this.prototypeView.isValid!=null){return this.prototypeView.isValid();}else{return false;
}return true;};a.prototype.getResult=function(){var c;c=this.prototypeView.getResult();return c;};a.prototype.getSkipped=function(){if(this.prototypeView.getSkipped!=null){return this.prototypeView.getSkipped();
}else{throw"Prototype skipping not implemented";}};a.prototype.cancel=function(){return Tangerine.router.navigate("class/"+(this.options.student.get("klassId"))+"/"+(this.options.subtest.get("part")),true);
};a.prototype.done=function(){if(this.isValid()){this.result.add(this.getResult());return Tangerine.router.navigate("class/"+(this.options.student.get("klassId"))+"/"+(this.options.subtest.get("part")),true);
}else{return this.prototypeView.showErrors();}};return a;})(Backbone.View);