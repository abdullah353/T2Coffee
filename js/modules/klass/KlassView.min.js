var KlassView,_ref,__hasProp={}.hasOwnProperty,__extends=function(d,b){for(var a in b){if(__hasProp.call(b,a)){d[a]=b[a];}}function c(){this.constructor=d;
}c.prototype=b.prototype;d.prototype=new c();d.__super__=b.prototype;return d;};KlassView=(function(a){__extends(b,a);function b(){_ref=b.__super__.constructor.apply(this,arguments);
return _ref;}b.prototype.initialize=function(c){var d,e=this;this.klass=c.klass;this.assessments=this.klass.assessments;this.results=[];d=new KlassAssessments;
return d.fetch({success:function(g){var f;e.assessments=g.where({klassId:e.klass.id});f=new Results;return f.fetch({success:function(j){var k,l,i,h;h=e.assessments;
for(l=0,i=h.length;l<i;l++){k=h[l];k.results=j.where({assessmentId:k.id});}return e.render();}});}});};b.prototype.render=function(){var c,d,h,k,i,g,j,f,e;
i=this.klass.get("year")||"";d=this.klass.get("grade")||"";k=this.klass.get("stream")||"";h="    <h1>"+(t("class"))+" "+k+"</h1>    <table>      <tr><td>"+(t("year"))+"</td><td>"+i+"</td></tr>      <tr><td>"+(t("grade"))+"</td><tr>"+d+"</td></tr>    </table>    </div>    <ul class='assessment_list'>";
f=this.assessments;for(g=0,j=f.length;g<j;g++){c=f[g];h+="<li data-id='"+c.id+"'>"+(c.get("name"))+" - "+((e=c.get("results"))!=null?e.length:void 0)+"</li>";
}h+="</ul>";this.$el.html(h);return this.trigger("rendered");};return b;})(Backbone.View);