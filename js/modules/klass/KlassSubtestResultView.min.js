var KlassSubtestResultView,_ref,__hasProp={}.hasOwnProperty,__extends=function(d,b){for(var a in b){if(__hasProp.call(b,a)){d[a]=b[a];}}function c(){this.constructor=d;
}c.prototype=b.prototype;d.prototype=new c();d.__super__=b.prototype;return d;};KlassSubtestResultView=(function(b){__extends(a,b);function a(){_ref=a.__super__.constructor.apply(this,arguments);
return _ref;}a.prototype.events={"click .run":"gotoRun","click .back":"back","click .show_itemized":"showItemized"};a.prototype.initialize=function(c){};
a.prototype.showItemized=function(){return this.$el.find(".itemized").fadeToggle();};a.prototype.gotoRun=function(){return Tangerine.router.navigate("class/run/"+this.options.student.id+"/"+this.options.subtest.id,true);
};a.prototype.back=function(){return Tangerine.router.navigate("class/"+(this.options.student.get("klassId"))+"/"+(this.options.subtest.get("part")),true);
};a.prototype.render=function(){var h,o,j,q,m,l,p,r,k,s,g,f,n,c,e,d;p=this.options.subtest.get("items");l="<br>";r="";if(this.options.result.length!==0){h=s=0;
e=this.options.result[0].get("subtestData").items;for(g=0,n=e.length;g<n;g++){q=e[g];if(q.itemResult==="correct"){h++;}s++;}m=(h/s)*100;if(m<(parseFloat(Tangerine.settings.generalThreshold)*100)){l+="<div class='info_box'><b>Warning</b><br>Student's "+(Math.decimals(m,2))+"% score is less than threshold of "+(Math.decimals(Tangerine.settings.generalThreshold*100,2))+"%</div><br>";
}l+="<button class='command show_itemized'>"+(t("itemized results"))+"</button><table class='itemized confirmation'><tbody><tr><th>Item</th><th>Result</th></tr>";
d=this.options.result[0].get("subtestData").items;for(j=f=0,c=d.length;f<c;j=++f){o=d[j];l+="<tr><td>"+o.itemLabel+"</td><td>"+(t(o.itemResult))+"</td></tr>";
}l+="</tbody></table><br>";k=new Date(this.options.result[0].get("timestamp"));r+="        <tr>          <td><label>"+(t("taken"))+"</label></td><td>"+(k.getFullYear())+"/"+(k.getMonth()+1)+"/"+(k.getDate())+"</td>        </tr>      ";
}this.$el.html("      <h1>Result</h1>      <table class='info_box'><tbody>        <tr>          <td><label>Assessment</label></td>          <td>"+(this.options.subtest.get("part"))+"</td>        </tr>        <tr>          <td><label>Student</label></td>          <td>"+(this.options.student.escape("name"))+"</td>        </tr>        <tr>          <td><label>Subtest</label></td>          <td>"+(this.options.subtest.escape("name"))+"</td>        </tr>        "+r+"      </tbody></table>      "+l+"      <div class='menu_box'>        <img src='images/icon_run.png' class='run'>      </div><br>      <button class='navigation back'>Back</button>    ");
return this.trigger("rendered");};return a;})(Backbone.View);