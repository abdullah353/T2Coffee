var KlassListElementView,_ref,__bind=function(a,b){return function(){return a.apply(b,arguments);};},__hasProp={}.hasOwnProperty,__extends=function(d,b){for(var a in b){if(__hasProp.call(b,a)){d[a]=b[a];
}}function c(){this.constructor=d;}c.prototype=b.prototype;d.prototype=new c();d.__super__=b.prototype;return d;};KlassListElementView=(function(a){__extends(b,a);
function b(){this.render=__bind(this.render,this);_ref=b.__super__.constructor.apply(this,arguments);return _ref;}b.prototype.tagName="li";b.prototype.events={"click .run":"run","click .results":"showReportSelect","change #report":"getReportMenu","click .cancel_report":"cancelReport","click .edit":"edit","click .delete":"toggleDelete","click .delete_cancel":"toggleDelete","click .delete_delete":"delete"};
b.prototype.initialize=function(c){this.availableReports=Tangerine.config.reports;if(c.klass.has("curriculumId")){this.curriculum=new Curriculum({_id:c.klass.get("curriculumId"||"")});
return this.curriculum.fetch({success:this.render});}else{return this.curriculum=new Curriculum;}};b.prototype.edit=function(){return Tangerine.router.navigate("class/edit/"+this.options.klass.id,true);
};b.prototype.getReportMenu=function(d){var c;if((c=this.subMenuView)!=null){c.close();}this.subMenuView=new window[$(d.target).find(":selected").attr("data-menu_view")]({parent:this});
this.$el.find("#report_menu_container").append("<div class='report_menu'></div>");this.subMenuView.setElement(this.$el.find("#report_menu_container .report_menu"));
return this.subMenuView.render();};b.prototype.showReportSelect=function(){return this.$el.find(".report_select_container").removeClass("confirmation");
};b.prototype.cancelReport=function(){var c;this.$el.find("div#report_menu").empty();this.$el.find("#report :nth-child(1)").attr("selected","selected");
this.$el.find(".report_select_container").addClass("confirmation");return(c=this.subMenuView)!=null?c.close():void 0;};b.prototype.onClose=function(){var c;
return(c=this.subMenuView)!=null?c.close():void 0;};b.prototype.run=function(){return Tangerine.router.navigate("class/"+this.options.klass.id,true);};
b.prototype.toggleDelete=function(){return this.$el.find(".delete_confirm").toggle();};b.prototype["delete"]=function(){return this.options.klass.collection.get(this.options.klass).destroy();
};b.prototype.render=function(){var c,d;c=this.options.klass;this.$el.html("      <table>        <tr><td><small>"+(t("year"))+"</small></td><td>"+(c.get("year"))+"</td></tr>        <tr><td><small>"+(t("grade"))+"</small></td><td>"+(c.get("grade"))+"</td></tr>        <tr><td><small>"+(t("stream"))+"</small></td><td>"+(c.get("stream"))+"</td></tr>        <tr><td><small>"+(t("curriculum"))+"</small></td><td>"+(this.curriculum.escape("name"||""))+"</td></tr>      </table>      <img src='images/icon_run.png'     class='run'>      <img src='images/icon_results.png' class='results'>      <img src='images/icon_edit.png'    class='edit'>      <img src='images/icon_delete.png'  class='delete'>      <div class='report_select_container confirmation'>        <div class='menu_box'>          <select id='report'>            <option selected='selected' disabled='disabled'>"+(t("select report type"))+"</option>            "+(((function(){var h,g,e,f;
e=this.availableReports;f=[];for(h=0,g=e.length;h<g;h++){d=e[h];f.push("<option data-menu_view='"+d.menuView+"'>"+(t(d.name))+"</option>");}return f;}).call(this)).join(""))+"          </select>        </div>        <div id='report_menu_container'></div>        <button class='command cancel_report'>"+(t("cancel"))+"</button>      </div>      <div class='delete_confirm confirmation'>        <div class='menu_box'>          "+(t("confirm"))+"<br>          <button class='delete_delete command_red'>"+(t("delete"))+"</button>          <button class='delete_cancel command'>"+(t("cancel"))+"</button>        </div>      </div>    ");
return this.trigger("rendered");};return b;})(Backbone.View);