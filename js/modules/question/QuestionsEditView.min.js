var QuestionsEditView,_ref,__bind=function(a,b){return function(){return a.apply(b,arguments);};},__hasProp={}.hasOwnProperty,__extends=function(d,b){for(var a in b){if(__hasProp.call(b,a)){d[a]=b[a];
}}function c(){this.constructor=d;}c.prototype=b.prototype;d.prototype=new c();d.__super__=b.prototype;return d;};QuestionsEditView=(function(b){__extends(a,b);
function a(){this.render=__bind(this.render,this);_ref=a.__super__.constructor.apply(this,arguments);return _ref;}a.prototype.tagName="ul";a.prototype.className="questions_edit_view";
a.prototype.initialize=function(c){this.views=[];return this.questions=c.questions;};a.prototype.onClose=function(){return this.closeViews();};a.prototype.closeViews=function(){var f,g,e,c,d;
c=this.views;d=[];for(g=0,e=c.length;g<e;g++){f=c[g];d.push(f.close());}return d;};a.prototype.render=function(){var g,f,e,h,d,c,j=this;this.closeViews();
c=this.questions.models;for(g=h=0,d=c.length;h<d;g=++h){f=c[g];e=new QuestionsEditListElementView({question:f});this.views.push(e);e.on("deleted",this.render);
e.render();this.$el.append(e.el);}return this.$el.sortable({handle:".sortable_handle",start:function(i,k){return k.item.addClass("drag_shadow");},stop:function(i,k){return k.item.removeClass("drag_shadow");
},update:function(i,p){var k,q,r,o,l,m,n;m=(function(){var u,s,v,t;v=this.$el.find("li.question_list_element");t=[];for(u=0,s=v.length;u<s;u++){q=v[u];
t.push($(q).attr("data-id"));}return t;}).call(j);n=[];for(g=o=0,l=m.length;o<l;g=++o){k=m[g];r=j.questions.get(k);n.push(j.questions.get(k).set({order:g},{silent:true}).save(null,{silent:true}));
}return n;}});};return a;})(Backbone.View);