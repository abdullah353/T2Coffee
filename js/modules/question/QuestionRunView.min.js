var QuestionRunView,_ref,__bind=function(a,b){return function(){return a.apply(b,arguments);};},__hasProp={}.hasOwnProperty,__extends=function(d,b){for(var a in b){if(__hasProp.call(b,a)){d[a]=b[a];
}}function c(){this.constructor=d;}c.prototype=b.prototype;d.prototype=new c();d.__super__=b.prototype;return d;};QuestionRunView=(function(b){__extends(a,b);
function a(){this.setMessage=__bind(this.setMessage,this);_ref=a.__super__.constructor.apply(this,arguments);return _ref;}a.prototype.className="question buttonset";
a.prototype.events={"change input":"update","change textarea":"update","click .autoscroll_icon":"scroll"};a.prototype.scroll=function(c){return this.trigger("scroll",c,this.model.get("order"));
};a.prototype.initialize=function(c){this.model=c.model;this.answer={};this.name=this.model.escape("name").replace(/[^A-Za-z0-9_]/g,"-");this.type=this.model.get("type");
this.options=this.model.get("options");this.notAsked=c.notAsked;this.isObservation=c.isObservation;this.defineSpecialCaseResults();if(this.model.get("skippable")==="true"||this.model.get("skippable")===true){this.isValid=true;
this.skipped=true;}else{this.isValid=false;this.skipped=false;}if(this.notAsked===true){this.isValid=true;return this.updateResult();}};a.prototype.update=function(c){this.updateResult();
this.updateValidity();return this.trigger("answer",c,this.model.get("order"));};a.prototype.updateResult=function(){var f,g,j,h,e,d,c,k;if(this.type==="open"){if(this.notAsked===true){this.answer="not_asked";
}else{this.answer=this.$el.find("#"+this.cid+"_"+this.name).val();}}else{if(this.type==="single"){if(this.notAsked===true){this.answer="not_asked";}else{this.answer=this.$el.find("."+this.cid+"_"+this.name+":checked").val();
}}else{if(this.type==="multiple"){if(this.notAsked===true){c=this.options;for(f=j=0,e=c.length;j<e;f=++j){g=c[f];this.answer[this.options[f].value]="not_asked";
}}else{k=this.options;for(f=h=0,d=k.length;h<d;f=++h){g=k[f];this.answer[this.options[f].value]=this.$el.find("#"+this.cid+"_"+this.name+"_"+f).is(":checked")?"checked":"unchecked";
}}}}}return this.$el.attr("data-result",_.isString(this.answer)?this.answer:JSON.stringify(this.answer));};a.prototype.updateValidity=function(){if(this.model.get("skippable")===true||$("#question-"+this.name).hasClass("disabled_skipped")){this.isValid=true;
return this.skipped=_.isEmpty(this.answer)?true:false;}else{return this.isValid=_.isEmpty(this.answer)?false:true;}};a.prototype.setMessage=function(c){return this.$el.find(".error_message").html(c);
};a.prototype.render=function(){var e,g,f,h,j,d,c;this.$el.attr("id","question-"+this.name);if(!this.notAsked){g="<div class='error_message'></div><div class='prompt'>"+(this.model.get("prompt"))+"</div>      <div class='hint'>"+(this.model.get("hint")||"")+"</div>";
if(this.type==="open"){if(this.model.get("multiline")){g+="<div><textarea id='"+this.cid+"_"+this.name+"' data-cid='"+this.cid+"'></textarea></div>";}else{g+="<div><input id='"+this.cid+"_"+this.name+"' data-cid='"+this.cid+"'></div>";
}}else{e=this.type==="multiple"?"checkbox":"radio";this.options.sort(function(){return 0.5-Math.random();});c=this.options;for(f=j=0,d=c.length;j<d;f=++j){h=c[f];
g+="            <label for='"+this.cid+"_"+this.name+"_"+f+"'>"+h.label+"</label>            <input id='"+this.cid+"_"+this.name+"_"+f+"' class='"+this.cid+"_"+this.name+"'  data-cid='"+this.cid+"' name='"+this.name+"' value='"+h.value+"' type='"+e+"'>          ";
}}if(this.isObservation){g+="<img src='images/icon_scroll.png' class='icon autoscroll_icon' data-cid='"+this.cid+"'>";}this.$el.html(g);}else{this.$el.hide();
}return this.trigger("rendered");};a.prototype.defineSpecialCaseResults=function(){var g,h,k,j,f,e,l,c,d;k=["missing","notAsked","skipped","logicSkipped"];
for(f=0,l=k.length;f<l;f++){g=k[f];if(this.type==="single"||this.type==="open"){this[g+"Result"]=g;}if(this.type==="multiple"){this[g+"Result"]={};d=this.options;
for(h=e=0,c=d.length;e<c;h=++e){j=d[h];this[g+"Result"][this.options[h].value]=g;}}}};return a;})(Backbone.View);