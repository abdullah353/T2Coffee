var NavigationView,_ref,__bind=function(a,b){return function(){return a.apply(b,arguments);};},__hasProp={}.hasOwnProperty,__extends=function(d,b){for(var a in b){if(__hasProp.call(b,a)){d[a]=b[a];
}}function c(){this.constructor=d;}c.prototype=b.prototype;d.prototype=new c();d.__super__=b.prototype;return d;};NavigationView=(function(b){__extends(a,b);
function a(){this.handleMenu=__bind(this.handleMenu,this);this.initialize=__bind(this.initialize,this);_ref=a.__super__.constructor.apply(this,arguments);
return _ref;}a.prototype.el="#navigation";a.prototype.events=Modernizr.touch?{"touchstart div#logout_link":"logout","touchstart button":"submenuHandler","touchstart #corner_logo":"logoClick","touchstart #enumerator":"enumeratorClick"}:{"click div#logout_link":"logout","click button":"submenuHandler","click #corner_logo":"logoClick","click #enumerator":"enumeratorClick"};
a.prototype.enumeratorClick=function(){return Tangerine.router.navigate("account",true);};a.prototype.logoClick=function(){if(this.user.isAdmin()){Tangerine.activity="";
return this.router.navigate("",true);}else{if(Tangerine.activity==="assessment run"){if(confirm("Assessment not finished. Continue to main?")){Tangerine.activity="";
return this.router.navigate("",true);}}else{return this.router.navigate("",true);}}};a.prototype.logout=function(){if(this.user.isAdmin()){Tangerine.activity="";
return this.router.navigate("logout",true);}else{if(Tangerine.activity==="assessment run"){if(confirm("Assessment not finished. Continue to logout?")){Tangerine.activity="";
return this.router.navigate("logout",true);}}else{if(confirm("Are you sure you want to logout?")){Tangerine.activity="";return this.router.navigate("logout",true);
}}}};a.prototype.onClose=function(){};a.prototype.initialize=function(c){this.render();this.user=c.user;this.router=c.router;this.router.on("all",this.handleMenu);
return this.user.on("change:authentication",this.handleMenu);};a.prototype.submenuHandler=function(d){var c;return typeof(c=vm.currentView).submenuHandler==="function"?c.submenuHandler(d):void 0;
};a.prototype.closeSubmenu=function(){return this.$el.find("main_nav").empty();};a.prototype.render=function(){var c;c=Tangerine.user.isAdmin()&&Tangerine.settings.context!=="server"?"<a href='#update'>"+(t("update"))+"</a>":"";
this.$el.html("    <img id='corner_logo' src='images/corner_logo.png'>    <div id='logout_link'>"+(t("logout"))+"</div>    <div id='enumerator_box'>      "+(t("enumerator"))+"      <div id='enumerator'>"+(Tangerine.user.name||"")+"</div>    </div>    <div id='current_student'>      Student ID      <div id='current_student_id'></div>    </div>    <div id='version'>    version <br/>    <span id='version-uuid'>"+Tangerine.version+"</span><br/>    "+c+"    </div>    ");
$("body").ajaxStart(function(){return $("#corner_logo").attr("src","images/spin_orange.gif");});return $("body").ajaxStop(function(){return $("#corner_logo").attr("src","images/corner_logo.png");
});};a.prototype.setStudent=function(c){if(c===""){this.$el.find("#current_student_id").fadeOut(250,function(d){return $(d).html("");});return this.$el.find("#current_student").fadeOut(250);
}else{return this.$el.find("#current_student_id").html(c).parent().fadeIn(250);}};a.prototype.handleMenu=function(c){var d=this;$("#enumerator").html(this.user.name);
if(~window.location.toString().indexOf("name=")){this.$el.find("#logout_link").hide();}else{this.$el.find("#logout_link").show();}return this.user.verify({isRegistered:function(){d.render();
return $("#navigation").fadeIn(250);},isUnregistered:function(){d.render();return $("#navigation").fadeOut(250);}});};return a;})(Backbone.View);