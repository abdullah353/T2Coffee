var Subtest,_ref,__hasProp={}.hasOwnProperty,__extends=function(d,b){for(var a in b){if(__hasProp.call(b,a)){d[a]=b[a];}}function c(){this.constructor=d;
}c.prototype=b.prototype;d.prototype=new c();d.__super__=b.prototype;return d;};Subtest=(function(b){__extends(a,b);function a(){_ref=a.__super__.constructor.apply(this,arguments);
return _ref;}a.prototype.url="subtest";a.prototype.initialize=function(c){this.templates=Tangerine.templates.prototypeTemplates;if(this.has("surveyAttributes")){if(this.get("assessmentId")!==this.get("surveyAttributes").assessmentId){return this.save("surveyAttributes",{_id:this.id,assessmentId:this.get("assessmentId")});
}}};a.prototype.loadPrototypeTemplate=function(d){var e,f,c;c=this.templates[d];for(e in c){f=c[e];this.set(e,f);}return this.save();};a.prototype.copyTo=function(e){var d,c,f,g=this;
c=this.clone();d=Utils.guid();if(c.has("surveyAttributes")){c.set("surveyAttributes",{_id:d,assessmentId:e});}c.save({_id:d,assessmentId:e,order:0,gridLinkId:""});
f=new Questions;return f.fetch({key:this.get("assessmentId"),success:function(m){var l,i,k,j,h;k=m.where({subtestId:g.id});for(j=0,h=k.length;j<h;j++){i=k[j];
l=i.clone();l.save({assessmentId:e,_id:Utils.guid(),subtestId:d});}Tangerine.router.navigate("edit/"+e,true);return Utils.midAlert("Subtest copied");}});
};return a;})(Backbone.Model);