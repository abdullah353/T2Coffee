var SubtestRunView,_ref,__bind=function(a,b){return function(){return a.apply(b,arguments);};},__hasProp={}.hasOwnProperty,__extends=function(d,b){for(var a in b){if(__hasProp.call(b,a)){d[a]=b[a];
}}function c(){this.constructor=d;}c.prototype=b.prototype;d.prototype=new c();d.__super__=b.prototype;return d;};SubtestRunView=(function(b){__extends(a,b);
function a(){this.hideNext=__bind(this.hideNext,this);this.showNext=__bind(this.showNext,this);_ref=a.__super__.constructor.apply(this,arguments);return _ref;
}a.prototype.events={"click .next":"next","click .subtest_help":"toggleHelp","click .skip":"skip"};a.prototype.toggleHelp=function(){return this.$el.find(".enumerator_help").fadeToggle(250);
};a.prototype.initialize=function(c){this.protoViews=Tangerine.config.prototypeViews;this.model=c.model;this.parent=c.parent;return this.prototypeRendered=false;
};a.prototype.render=function(){var c,d,e,f,g=this;c=(this.model.get("enumeratorHelp")||"")!==""?"<button class='subtest_help command'>help</button><div class='enumerator_help'>"+(this.model.get("enumeratorHelp"))+"</div>":"";
f=(this.model.get("studentDialog")||"")!==""?"<div class='student_dialog'>"+(this.model.get("studentDialog"))+"</div>":"";d="<button class='skip navigation'>Skip</button>";
e=this.model.get("skippable")===true||this.model.get("skippable")==="true";this.$el.html("    <div class='controlls'>        <button class='next navigation'>Next</button>"+(e?d:"")+"      </div>      <h2>"+(this.model.get("name"))+"</h2>      "+c+"      "+f+"      <div id='prototype_wrapper'></div>      <div class='controlls'>        <button class='next navigation'>Next</button>"+(e?d:"")+"      </div>    ");
this.prototypeView=new window[this.protoViews[this.model.get("prototype")]["run"]]({model:this.model,parent:this});this.prototypeView.on("rendered",function(){return g.trigger("rendered");
});this.prototypeView.on("subRendered",function(){return g.trigger("subRendered");});this.prototypeView.on("showNext",function(){return g.showNext();});
this.prototypeView.on("hideNext",function(){return g.hideNext();});this.prototypeView.setElement(this.$el.find("#prototype_wrapper"));this.prototypeView.render();
this.prototypeRendered=true;this.trigger("rendered");if(this.model.get("prototype")==="datetime"){return setTimeout(function(){return $(".next").trigger("click");
},500);}};a.prototype.showNext=function(){return this.$el.find(".controlls").show();};a.prototype.hideNext=function(){return this.$el.find(".controlls").hide();
};a.prototype.getGridScore=function(){var d,c,e;e=this.model.get("gridLinkId")||"";if(e===""){return;}d=this.parent.model.subtests.get(this.model.get("gridLinkId"));
c=this.parent.result.getGridScore(d.id);return c;};a.prototype.gridWasAutostopped=function(){var c,e,d;d=this.model.get("gridLinkId")||"";if(d===""){return;
}c=this.parent.model.subtests.get(this.model.get("gridLinkId"));return e=this.parent.result.gridWasAutostopped(c.id);};a.prototype.onClose=function(){var c;
return(c=this.prototypeView)!=null?typeof c.close==="function"?c.close():void 0:void 0;};a.prototype.isValid=function(){if(!this.prototypeRendered){return false;
}if(this.prototypeView.isValid!=null){return this.prototypeView.isValid();}else{return false;}return true;};a.prototype.showErrors=function(){return this.prototypeView.showErrors();
};a.prototype.getSum=function(){if(this.prototypeView.getSum!=null){return this.prototypeView.getSum();}else{return{correct:0,incorrect:0,missing:0,total:0};
}};a.prototype.abort=function(){return this.parent.abort();};a.prototype.getResult=function(){return this.prototypeView.getResult();};a.prototype.getSkipped=function(){if(this.prototypeView.getSkipped!=null){return this.prototypeView.getSkipped();
}else{throw"Prototype skipping not implemented";}};a.prototype.next=function(){return this.parent.next();};a.prototype.skip=function(){return this.parent.skip();
};return a;})(Backbone.View);