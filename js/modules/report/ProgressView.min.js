var ProgressView,_ref,__hasProp={}.hasOwnProperty,__extends=function(d,b){for(var a in b){if(__hasProp.call(b,a)){d[a]=b[a];}}function c(){this.constructor=d;
}c.prototype=b.prototype;d.prototype=new c();d.__super__=b.prototype;return d;};ProgressView=(function(a){__extends(b,a);function b(){_ref=b.__super__.constructor.apply(this,arguments);
return _ref;}b.prototype.initialize=function(g){var j,h,f,d,i,e,c;this.results=g.results;this.student=g.student;this.klass=g.klass;this.resultsByPart=[];
j={};c=this.results.models;for(i=0,e=c.length;i<e;i++){d=c[i];j[d.get("resultBucket")]=true;f=d.get("part");if(this.resultsByPart[f]==null){this.resultsByPart[f]=[];
}this.resultsByPart[f].push(d);this.resultsByPart[f].sort(function(l,k){return l.attributes.reportType<k.attributes.reportType;});}j=_.keys(j);h=604800000;
return this.currentPart=Math.round(((new Date()).getTime()-this.klass.get("startDate"))/h);};b.prototype.render=function(){var j,m,n,h,l,q,p,o,k,r,f,d,c,s,t,i,g,e;
l="      <h1>Progress table</h1>      <h2>"+(this.student.get("name"))+"</h2>      <table class='mastery_check'>    ";for(o=f=1,i=this.currentPart;1<=i?f<=i:f>=i;
o=1<=i?++f:--f){if(this.resultsByPart[o]===void 0){continue;}l+="<tr>";l+="<td>Week</td><td>"+o+"</td>";g=this.resultsByPart[o];for(d=0,s=g.length;d<s;
d++){n=g[d];m=n.attributes.resultBucket.titleize();h=0;e=n.attributes.subtestData.items;for(c=0,t=e.length;c<t;c++){q=e[c];if(q.itemResult==="correct"){h++;
}}j=n.attributes.subtestData.attempted;r=n.attributes.subtestData.time_remain;k=60;p=Math.round((h/(k-r))*k);l+="<td>"+m+" correct</td><td>"+h+"/"+j+"</td>";
l+="<td>"+m+" per minute</td><td>"+p+"</td>";}}l+="</table>";this.$el.html(l);return this.trigger("rendered");};return b;})(Backbone.View);