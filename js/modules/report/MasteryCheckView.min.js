var MasteryCheckView,_ref,__hasProp={}.hasOwnProperty,__extends=function(d,b){for(var a in b){if(__hasProp.call(b,a)){d[a]=b[a];}}function c(){this.constructor=d;
}c.prototype=b.prototype;d.prototype=new c();d.__super__=b.prototype;return d;};MasteryCheckView=(function(a){__extends(b,a);function b(){_ref=b.__super__.constructor.apply(this,arguments);
return _ref;}b.prototype.initialize=function(g){var j,h,f,d,i,e,c;this.results=g.results;this.student=g.student;this.klass=g.klass;this.resultsByPart=[];
j={};c=this.results.models;for(i=0,e=c.length;i<e;i++){d=c[i];j[d.get("resultBucket")]=true;f=d.get("part");if(this.resultsByPart[f]==null){this.resultsByPart[f]=[];
}this.resultsByPart[f].push(d);this.resultsByPart[f].sort(function(l,k){return l.attributes.reportType<k.attributes.reportType;});}j=_.keys(j);h=604800000;
return this.currentPart=Math.round(((new Date()).getTime()-this.klass.get("startDate"))/h);};b.prototype.render=function(){var k,p,m,l,q,d,n,j,i,g,o,c,h,f,e;
l="      <h1>Mastery check report</h1>      <h2>"+(this.student.get("name"))+"</h2>      <table class='mastery_check'>    ";for(d=j=1,h=this.currentPart;
1<=h?j<=h:j>=h;d=1<=h?++j:--j){if(this.resultsByPart[d]===void 0){continue;}l+="<tr>";l+="<td>Week</td><td>"+d+"</td>";f=this.resultsByPart[d];for(i=0,o=f.length;
i<o;i++){p=f[i];k=p.attributes.resultBucket.titleize();m=0;e=p.attributes.subtestData.items;for(g=0,c=e.length;g<c;g++){q=e[g];if(q.itemResult==="correct"){m++;
}}n=p.attributes.subtestData.items.length;l+="<td>"+k+" correct</td><td>"+m+"/"+n+"</td>";}}l+="</table>";this.$el.html(l);return this.trigger("rendered");
};return b;})(Backbone.View);