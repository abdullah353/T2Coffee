var PartByStudentMenuView,_ref,__hasProp={}.hasOwnProperty,__extends=function(d,b){for(var a in b){if(__hasProp.call(b,a)){d[a]=b[a];}}function c(){this.constructor=d;
}c.prototype=b.prototype;d.prototype=new c();d.__super__=b.prototype;return d;};PartByStudentMenuView=(function(b){__extends(a,b);function a(){_ref=a.__super__.constructor.apply(this,arguments);
return _ref;}a.prototype.events={"change .part_selector":"gotoPartByStudentReport"};a.prototype.gotoPartByStudentReport=function(c){return Tangerine.router.navigate("report/partByStudent/"+this.$el.find(c.target).find(":selected").attr("data-subtestId"),true);
};a.prototype.initialize=function(c){var e,d,f=this;this.parent=c.parent;this.klass=this.parent.options.klass;this.curricula=this.parent.options.curricula;
d=604800000;this.currentPart=Math.round(((new Date()).getTime()-this.klass.get("startDate"))/d);e=new Subtests;return e.fetch({success:function(j){var h,k,i,g;
k=j.where({curriculaId:f.curricula.id});f.parts=[];for(i=0,g=k.length;i<g;i++){h=k[i];f.parts[h.get("part")]=h.id;}f.ready=true;return f.render();}});};
a.prototype.render=function(){var d,h,f,g,i,e,c;if(this.ready){h="        <select class='part_selector'>          <option disabled='disabled' selected='selected'>Select an assessment</option>          ";
c=this.parts;for(f=i=0,e=c.length;i<e;f=++i){g=c[f];if(g!=null){d=this.currentPart===f?"**":"";h+="<option data-subtestId='"+g+"'>"+f+d+"</option>";}}h+="</select>";
return this.$el.html(h);}else{return this.$el.html("<img src='images/loading.gif' class='loading'>");}};return a;})(Backbone.View);