var AssessmentListElementView,_ref,__hasProp={}.hasOwnProperty,__extends=function(d,b){for(var a in b){if(__hasProp.call(b,a)){d[a]=b[a];}}function c(){this.constructor=d;
}c.prototype=b.prototype;d.prototype=new c();d.__super__=b.prototype;return d;};AssessmentListElementView=(function(a){__extends(b,a);function b(){_ref=b.__super__.constructor.apply(this,arguments);
return _ref;}b.prototype.tagName="li";b.prototype.events={"click .edit":"gotoEdit","click .results":"gotoResults","click .run":"gotoRun","click .chart":"gotoChart","click .print":"gotoPrint","click .assessment_menu_toggle":"assessmentMenuToggle","click .admin_name":"assessmentMenuToggle","click .assessment_delete":"assessmentDeleteToggle","click .assessment_delete_cancel":"assessmentDeleteToggle","click .assessment_delete_confirm":"assessmentDelete","click .copy":"copyToGroup","click .duplicate":"duplicate","click .archive":"archive","click .update":"update"};
b.prototype.initialize=function(c){this.parent=c.parent;this.isAdmin=Tangerine.user.isAdmin();this.isPublic=c.isPublic;return this.model=c.model;};b.prototype.gotoEdit=function(){return Tangerine.router.navigate("edit/"+this.model.id,true);
};b.prototype.gotoResults=function(){return Tangerine.router.navigate("results/"+this.model.id,true);};b.prototype.gotoRun=function(){return Tangerine.router.navigate("run/"+this.model.id,true);
};b.prototype.gotoPrint=function(){return Tangerine.router.navigate("print/"+this.model.id,true);};b.prototype.gotoChart=function(){return Tangerine.router.navigate("chart/"+this.model.id,true);
};b.prototype.duplicate=function(){var c,d=this;c="Copy of "+this.model.get("name");return this.model.duplicate({name:c},null,null,function(){d.render();
return d.parent.refresh();});};b.prototype.update=function(){var c=this;this.model.updateFromServer();return this.model.on("status",function(d){if(d==="import success"){Utils.midAlert("Updated");
return c.parent.refresh();}else{if(d==="import error"){Utils.midAlert("Update failed");return c.parent.refresh();}}});};b.prototype.archive=function(){var c;
c=this.$el.find(".archive :selected").val()==="true";if(c===true){this.$el.find(".admin_name").addClass("archived_assessment");}else{this.$el.find(".admin_name").removeClass("archived_assessment");
}this.model.save({archived:c});return true;};b.prototype.copyToGroup=function(){var c=this;return this.model.duplicate({group:this.parent.group},null,null,function(){c.render();
return c.parent.refresh();});};b.prototype.assessmentMenuToggle=function(){this.$el.find(".assessment_menu_toggle").toggleClass("icon_down");return this.$el.find(".assessment_menu").fadeToggle(250);
};b.prototype.assessmentDeleteToggle=function(){this.$el.find(".assessment_delete_confirm").fadeToggle(250);return false;};b.prototype.assessmentDelete=function(){var c=this;
return this.$el.fadeOut(250,function(){c.parent.collection.remove(c.model);return c.model.destroy();});};b.prototype.render=function(){var j,t,l,p,i,e,r,c,o,f,h,u,k,q,s,m,n,d,g;
n=" selected='selected' ";t=this.model.get("archived")===true||this.model.get("archived")==="true"?" archived_assessment":"";i="<button class='copy command'>Copy to group</button>";
d="<span class='assessment_menu_toggle icon_ryte'> </span>";e="<img class='assessment_delete link_icon' title='Delete' src='images/icon_delete.png'>";r="<span class='assessment_delete_confirm'><div class='menu_box'>Confirm <button class='assessment_delete_yes command_red'>Delete</button> <button class='assessment_delete_cancel command'>Cancel</button></div></span>";
o="<img class='link_icon duplicate' title='Duplicate' src='images/icon_duplicate.png'>";f="<img class='link_icon edit' title='Edit' src='images/icon_edit.png'>";
g="<img class='link_icon update' title='Update' src='images/icon_sync.png'>";k="<button class='print'>Print</button>";c="<span class='small_grey'>Download key <b>"+(this.model.id.substr(-5,5))+"</b></span>";
s="<img class='link_icon results' title='Results' src='images/icon_results.png'>";p="<img class='link_icon chart' title='Results' src='images/chart.png'>";
m="<img class='link_icon run' title='Run' src='images/icon_run.png'>";u="<span class='name clickable '>"+(this.model.get("name"))+"</span>";j="<span class='admin_name clickable "+t+"'>"+(this.model.get("name"))+"</span>";
q="<span class='resultCount'>"+(this.model.get("resultCount")||"0")+" results</span>";l="    <select class='archive'>      <option value='false' "+(this.model.get("archived")===false?n:"")+">Active</option>      <option value='true'  "+(this.model.get("archived")===true?n:"")+">Archived</option>    </select>    ";
if(this.isAdmin){h="        <div>          "+d+"          "+j+"         </div>      ";if(Tangerine.settings.context==="mobile"){h+="          <div class='assessment_menu'>            "+m+"            "+p+"            "+s+"            "+g+"          </div>        ";
}else{if(this.isPublic){h+="            <div class='assessment_menu'>              "+i+"            </div>          ";}else{h+="            <div class='assessment_menu'>              "+m+"              "+s+"              "+f+"              "+o+"              "+e+"              "+c+"              "+r+"              "+k+"            </div>          ";
}}}else{h="<div>"+m+u+" "+s+" "+p+"</div>";}return this.$el.html(h);};return b;})(Backbone.View);